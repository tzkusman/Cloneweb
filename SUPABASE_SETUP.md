# Supabase Integration Setup Guide

## Step 1: Create Supabase Table

Execute this SQL in your Supabase project (SQL Editor):

```sql
-- Create quotes_and_inquiries table
CREATE TABLE quotes_and_inquiries (
  id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  service VARCHAR(255),
  message TEXT,
  form_type VARCHAR(50) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create index on email for faster queries
CREATE INDEX idx_quotes_email ON quotes_and_inquiries(email);

-- Create index on created_at for sorting
CREATE INDEX idx_quotes_created_at ON quotes_and_inquiries(created_at);

-- Enable Row Level Security (RLS)
ALTER TABLE quotes_and_inquiries ENABLE ROW LEVEL SECURITY;

-- Create policy to allow inserts from anonymous users
CREATE POLICY "Allow inserts from anyone" ON quotes_and_inquiries
  FOR INSERT
  WITH CHECK (TRUE);

-- Create policy to allow reads (optional, if you need to verify submission)
CREATE POLICY "Allow reads for testing" ON quotes_and_inquiries
  FOR SELECT
  USING (TRUE);
```

---

## Step 2: Get Your Supabase Credentials

1. Go to Supabase Dashboard
2. Select your project
3. Click on "Settings" → "API"
4. Copy:
   - **Project URL** (looks like: https://your-project.supabase.co)
   - **anon public key** (the public/anonymous API key)

---

## Step 3: Update Supabase Configuration

Open **assets/js/supabase.js** and replace these lines:

```javascript
const SUPABASE_URL = 'https://your-project.supabase.co'; // Replace this
const SUPABASE_ANON_KEY = 'your-anon-key'; // Replace this
```

With your actual credentials from Step 2.

---

## Step 4: How It Works

### Form Fields Captured:
- **name**: User's full name (required)
- **email**: User's email address (required)
- **phone**: User's phone number (required)
- **service**: Selected service from dropdown (optional)
- **message**: Message/inquiry text (optional, only in Contact form)
- **form_type**: Either "quote" or "contact" (automatically set)
- **created_at**: Timestamp when submitted (automatic)

### Form Types:
1. **Quote Form** - Modal popup on all pages
   - Fields: Name, Email, Phone, Service
   - Form Type: "quote"

2. **Contact Form** - Contact Us page
   - Fields: Name, Email, Phone, Message, Service (on modal)
   - Form Type: "contact"

---

## Step 5: Testing

1. Go to your website
2. Click "Get a Quote" button (appears on multiple pages)
3. Fill in the form and submit
4. Go to Supabase Dashboard → Tables → quotes_and_inquiries
5. You should see your submission in the table

---

## Data Validation

All forms have built-in validation:
- ✓ Name must contain only letters and spaces
- ✓ Email must be valid format
- ✓ Phone number required (international format supported)
- ✓ Service dropdown selection (on quote form)
- ✓ Message optional (max 250 characters on contact form)

---

## Success Messages

After successful submission:
- Alert message appears: "Thank you! Your inquiry has been received. We will contact you soon."
- Form resets automatically
- Quote modal closes automatically
- Data is stored in Supabase

---

## Error Handling

If something goes wrong:
- Error message displays: "Error submitting form. Please try again."
- User can retry the submission
- Details logged in browser console for debugging

---

## Table Fields Reference

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | BIGINT | Auto | Unique identifier |
| name | VARCHAR(255) | Yes | User's full name |
| email | VARCHAR(255) | Yes | User's email |
| phone | VARCHAR(20) | Yes | User's phone |
| service | VARCHAR(255) | No | Selected service |
| message | TEXT | No | User message |
| form_type | VARCHAR(50) | Yes | 'quote' or 'contact' |
| created_at | TIMESTAMP | Auto | Submission time |
| updated_at | TIMESTAMP | Auto | Last update time |

---

## All HTML Files Updated

The following files now have Supabase integration:

✓ index.html
✓ about-us.html
✓ contact-us.html
✓ copy-editing.html
✓ formatting-and-artwork-editing.html
✓ journal-selection.html
✓ journal-submission.html
✓ plagiarism-check.html
✓ pre-submission-review.html
✓ premium-editing.html
✓ proofreading.html
✓ publication-support.html
✓ quality-assurance.html
✓ resubmission-support.html
✓ substantive-editing.html

---

## Need Help?

- Check browser console (F12 → Console tab) for errors
- Verify Supabase URL and API key are correct
- Make sure RLS policies are enabled
- Check Supabase logs for detailed error messages
